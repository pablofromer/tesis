r(?X,?Y) :- P(?X).

///QUERY:

Q() :- r(?X1,?Y1),r(?Z1,?Y1),s(?X1,?Z1),t(?Z1,?X2),r(?X2,?Y2),r(?Z2,?Y2),s(?X2,?Z2).

?- Q(). 