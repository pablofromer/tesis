r(?z0,?z1, ?x1,?x2,?x3,?z1) :- s(?x1,?x2,?x3,?z0), r(?z0,?z1, ?x1,?x2,?x3,?z0).
r(?z0,?z1, ?x1,?x2,?x3,?z1) :- p(?x1,?x2,?x3,?z0), r(?z0,?z1, ?x1,?x2,?x3,?z0).

r(?z0,?z1, ?x1,?x2,?z1,?z0) :- s(?x1,?x2,?z0,?z1), r(?z0,?z1, ?x1,?x2,?z0,?z1).
r(?z0,?z1, ?x1,?x2,?z1,?z0) :- p(?x1,?x2,?z0,?z1), r(?z0,?z1, ?x1,?x2,?z0,?z1).

r(?z0,?z1, ?x1,?z1,?z0,?z0) :- s(?x1,?z0,?z1,?z1), r(?z0,?z1, ?x1,?z0,?z1,?z1).
r(?z0,?z1, ?x1,?z1,?z0,?z0) :- p(?x1,?z0,?z1,?z1), r(?z0,?z1, ?x1,?z0,?z1,?z1).

r(?z0,?z1, ?z1,?z0,?z0,?z0) :- s(?z0,?z1,?z1,?z1), r(?z0,?z1, ?z0,?z1,?z1,?z1).
r(?z0,?z1, ?z1,?z0,?z0,?z0) :- p(?z0,?z1,?z1,?z1), r(?z0,?z1, ?z0,?z1,?z1,?z1).


///QUERY:

Q() :- r(?A0,?A1, ?A1,?A1,?A1,?A1).

?- Q(). 