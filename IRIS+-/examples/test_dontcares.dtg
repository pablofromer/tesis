s(?X) :- t(?X, ?Y), p(?X).
q(?X) :- s(?X).

t('a','b').
p('a').
t('b','c').

?- q(?X).
