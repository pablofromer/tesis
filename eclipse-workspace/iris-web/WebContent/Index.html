<!DOCTYPE html>
<html>
<head>
<script src="lib/jquery.js"></script>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>

<h3>Program:</h3>
<textarea style="height:400px;" rows="4" cols="50" id="program"/></textarea>


<h3>Query:</h3>
	<button onclick="execute()" id="execute">Execute</button>
<div id="results"></div>



</body>

<script>

function execute() {
    $.ajax({
        type: "get",
        url: "http://localhost:8080/iris/test",
        data: {
            test: JSON.stringify({
                "program": $("#program").val()
            })
        },
        contentType: "application/json; charset=utf-8",
        success: function(response) {
            var jsonResponse = JSON.parse(response);
            console.log(jsonResponse);

			var stringResult = [];

			jsonResponse.forEach(queryResult => {
				
				stringResult.push(queryResult.Query);
				var variableBindings = [];
				queryResult.VariableBindings.forEach(variable =>{
					variableBindings.push(variable);
				})
				
				stringResult.push(variableBindings.join(", "));



			});


            $("#results").text(stringResult.join("\n"));
        }
    })
}
</script>
</html>

