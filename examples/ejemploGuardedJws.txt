r2(?x) :- r3(?x, ?y).
r3(?y, ?z) :- r1(?x, ?y).
r1(?y, ?x) :- r1(?x, ?y), r2(?y).

r1('a', 'b').

?- r1(?x, ?y).